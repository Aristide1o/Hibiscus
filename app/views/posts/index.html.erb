<%= link_to "New #{@type}", new_polymorphic_path(@type.constantize) %>

<script type="text/javascript">

  $(document).ready(function () {
    $('.main-post-div').css('opacity', 0).each(function (i) {
      var height = $('#main-all-posts-div').height();

      $('#main-all-posts-div').animate({ height:height + 215}, 500);
      $('#main-all-posts-div').height("+=215");
      $(this).css('display', 'block');
      $(this).animate({ opacity:0 }, i * 500);
      $(this).animate({ opacity:1}, 1000);
    })
  });
</script>

<% if @type == 'Kata'  %>

<table width='100%'>
  <tr>
    <td colspan="3">&nbsp;</td>
  </tr>
  <tr>
    <td width='33%'><%= Category.find('test-driven-development').name %></td>
    <td width='33%'>Algorithmic Complexity</td>
    <td width='33%'>Data modeling</td>
  </tr>
  <tr>
    <td>
      <%= Category.find('test-driven-development').katas.desc(:rating).each do %>
      <%= Category.find('test-driven-development').katas.desc(:rating).first.rating  %>
    </td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td colspan="3">&nbsp;</td>
  </tr>
  <tr>
    <td>Dynamic programming</td>
    <td>Off-the-shelf algorithms</td>
    <td>String manipulation</td>
  </tr>
  <tr>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td colspan="3">&nbsp;</td>
  </tr>
</table>

<% end %>

<div id="main-all-posts-div">
  <% @posts.desc(:created_at).limit(15).each do |post| %>
    <% if !post.is_a?(Kata) %>
      <div class="main-post-div" style="display: none;">
        <%= render partial: "posts/#{post.class.name.downcase}_short", locals: {post: post} %>
        <%#= render partial: "posts/#{@type.downcase}_short", locals: { post: post } %>
      </div>
    <% end %>
  <% end %>

  <% if @posts.first.is_a?(Kata) %>
    <% @categories.limit(6).each do |category| %>
      <div class="main-post-div" style="display: none;">
        <%= category %>
      </div>
    <% end %>
  <% end %>
</div>

<div id="second_new_post_link">

  <% if @posts.length > 0 %>                    <br><br>
    <%= link_to "New #{@type}", new_polymorphic_path(@type.constantize) %>
  <% end %>

  <br/><br/>

</div>